---
title: "Kiva Crowdfunding"
author: "Shraddha Powar"
format:
  html:
    toc: true
editor: visual
---

## Required Libraries

```{r}
#| label: load libraries
#| warning: false
#| echo: true
#| results: hide
library(tidyverse)
library(leaflet)
library(DT)
library(kableExtra)
```

## Loading the dataset

When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this:

```{r}
#| label: load data
#| warning: false
#| echo: true
#| results: hide
folder_name <- 'D:/NUIG BA/MS5130_Applied Analytics_R/R_A3/data/'

# Load data
kiva_loans <- read_csv(file = paste0(folder_name,"kiva_loans.csv"))
kiva_mpi_region_locations <- read_csv(file = paste0(folder_name,"kiva_mpi_region_locations.csv"))
loan_themes <- read_csv(file = paste0(folder_name,"loan_theme_ids.csv"))

```

## Data Exploration

For all 4 dataset's, we check the datatype of each column using `str()`, view the data snippet using `head()` and shape of the data using `dim()` function.

### Kiva Loans Data

```{r}
#| label: Kiva Loans Data
# To check the data type of each column
str(kiva_loans) 
# To view the data snippet
kable(head(kiva_loans,3), "html") %>% 
  kable_styling(bootstrap_options = c("striped", "hover"))
#To get the shape of data
dim(kiva_loans)
```

### Kiva MPI Region Locations

```{r}
#| label: Kiva MPI Region Locations
# To check the data type of each column
str(kiva_mpi_region_locations) 
# To view the data snippet
kable(head(kiva_mpi_region_locations,3), "html") %>% 
  kable_styling(bootstrap_options = c("striped", "hover"))
#To get the shape of data
dim(kiva_mpi_region_locations)
```

### Loan Themes

```{r}
#| label: Loan Themes
# To check the data type of each column
str(loan_themes) 
# To view the data snippet
kable(head(loan_themes,3), "html") %>% 
  kable_styling(bootstrap_options = c("striped", "hover"))
dim(loan_themes)
```

## Merge Datasets

```{r}
merged_data <- kiva_loans %>%
  left_join(loan_themes, by = "id")
merged_data <- merged_data %>%
  left_join(kiva_mpi_region_locations, by = c("country" = "country", "region" = "region"))
```

### Explore Merged Data

```{r}
#| label: Merged Data
# To check the data type of each column
str(merged_data) 
# To view the data snippet
kable(head(merged_data,3), "html") %>% 
  kable_styling(bootstrap_options = c("striped", "hover"))
dim(merged_data)
```

## Handling Missing Values

To handle missing data we remove all the rows with NA values

```{r}
merged_data <- merged_data[complete.cases(merged_data),]
dim(merged_data)
```

```{r}
summary(merged_data$loan_amount)
summary(merged_data$term_in_months)
```

```{r}
cor(merged_data$loan_amount, merged_data$term_in_months, use = "complete.obs")
```
